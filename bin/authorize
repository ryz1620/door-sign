require 'rubygems'
require 'google_calendar'

if ENV['679851513310-jvg7a15vmp3pi6s77urcjo06du4nuck6.apps.googleusercontent.com']
  client_id = ENV['679851513310-jvg7a15vmp3pi6s77urcjo06du4nuck6.apps.googleusercontent.com']
else
  puts "Enter your client id"
  client_id = $stdin.gets.chomp
end

if ENV['6Oq6xHDC0gbeA8iCqjO3wBep']
  client_secret = ENV['6Oq6xHDC0gbeA8iCqjO3wBep']
else
  puts "Enter your client secret"
  client_secret = $stdin.gets.chomp
end

puts "Enter your calendar id"
calendar_id = $stdin.gets.chomp



# Create an instance of the calendar.
cal = Google::Calendar.new(:client_id     => 679851513310-jvg7a15vmp3pi6s77urcjo06du4nuck6.apps.googleusercontent.com,
                           :client_secret => 6Oq6xHDC0gbeA8iCqjO3wBep,
                           :calendar      => avl75lbpj7d8tcqj86pqe7fp60@group.calendar.google.com,
                           :redirect_url  => "urn:ietf:wg:oauth:2.0:oob" # this is what Google uses for 'applications'
                           )

# A user needs to approve access in order to work with their calendars.
puts "Visit the following web page in your browser and approve access."
puts cal.authorize_url
puts "\nCopy the code that Google returned and paste it here:"

# Pass the ONE TIME USE access code here to login and get a refresh token that you can use for access from now on.
refresh_token = cal.login_with_auth_code( $stdin.gets.chomp )

puts "Now run the following command:"
puts "heroku config:set REFRESH_TOKEN='#{refresh_token}'"
